{% extends 'base.html' %}

{% block title %}Booking Management{% endblock %}

{% block content %}
<div class="dashboard-header">
    <div class="dashboard-title">
        <h1>Booking Management</h1>
    </div>
    <div class="dashboard-actions">
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addBookingModal">
            <i class="bi bi-plus"></i> New Booking
        </button>
    </div>
</div>

<div class="dashboard-section">
    <div class="table-container">
        <table id="bookings-table" class="table">
            <thead>
                <tr>
                    <th>Booking ID</th>
                    <th>Guest</th>
                    <th>Room</th>
                    <th>Check-In</th>
                    <th>Check-Out</th>
                    <th>Total Price</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Will be populated by JavaScript -->
            </tbody>
        </table>
    </div>
</div>

<!-- Add Booking Modal -->
<div class="modal fade" id="addBookingModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">New Booking</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="addBookingForm">
                    <div class="form-group">
                        <label for="guest" class="form-label">Guest</label>
                        <select class="form-control" id="guest" name="guest_id" required>
                            <option value="">Select Guest</option>
                            <!-- Will be populated by JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="room" class="form-label">Room</label>
                        <select class="form-control" id="room" name="room_id" required>
                            <option value="">Select Room</option>
                            <!-- Will be populated by JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="checkInDate" class="form-label">Check-In Date</label>
                        <input type="date" class="form-control" id="checkInDate" name="check_in_date" required>
                    </div>
                    <div class="form-group">
                        <label for="checkOutDate" class="form-label">Check-Out Date</label>
                        <input type="date" class="form-control" id="checkOutDate" name="check_out_date" required>
                    </div>
                    <div class="form-group">
                        <label for="totalPrice" class="form-label">Total Price</label>
                        <input type="number" class="form-control" id="totalPrice" name="total_price" step="0.01" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="addBooking()">Create Booking</button>
            </div>
        </div>
    </div>
</div>

<!-- View Booking Modal -->
<div class="modal fade" id="viewBookingModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Booking Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="booking-details">
                    <p><strong>Booking ID:</strong> <span id="viewBookingId"></span></p>
                    <p><strong>Guest:</strong> <span id="viewGuestName"></span></p>
                    <p><strong>Room:</strong> <span id="viewRoomNumber"></span></p>
                    <p><strong>Check-In:</strong> <span id="viewCheckIn"></span></p>
                    <p><strong>Check-Out:</strong> <span id="viewCheckOut"></span></p>
                    <p><strong>Total Price:</strong> <span id="viewTotalPrice"></span></p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger" onclick="deleteBooking()">Cancel Booking</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/bookings.js"></script>
{% endblock %} 